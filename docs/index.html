<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interacts With the Databrary.org API • databrary.r</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Interacts With the Databrary.org API">
<meta property="og:description" content="This package provides commands to interact with the 
  Databrary.org API. There are some public assets on Databrary. 
  But for most interesting use cases, a user will need to 
  register &lt;http://databrary.org/register&gt; and receive authorization 
  from an institution. Once authorized, users can download data 
  and metadata from Databrary.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">databrary.r</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/databrary-vignette.html">Accessing Databrary.org via the API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/databrary/databrary-r/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="databraryapi">databraryapi<a class="anchor" aria-label="anchor" href="#databraryapi"></a>
</h1></div>
<p>This repository contains code for the <code>databraryapi</code> R package.</p>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>Full package documentation built using <code>pkgdown</code> can be found <a href="https://PLAY-behaviorome.github.io/databraryapi" class="external-link">here</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<ul>
<li>Install the <code>devtools</code> package from CRAN: <code>install.packages("devtools")</code> if you have not already done so.</li>
<li>Load <code>devtools</code> into your local environment: <code><a href="https://devtools.r-lib.org/" class="external-link">library(devtools)</a></code>
</li>
<li>Install the <code>databraryapi</code> package via <code>install_github("PLAY-behaviorome/databraryapi")</code>. Required dependencies will be installed at this time.</li>
<li>The latest version is 0.2.9.</li>
</ul>
</div>
<div class="section level2">
<h2 id="use">Use<a class="anchor" aria-label="anchor" href="#use"></a>
</h2>
<p>The package is under active development, as is the documentation. Running <code>devtools::install_github("PLAY-behaviorome/databraryapi", force=TRUE)</code> regularly to get updates is strongly recommended.</p>
<div class="section level3">
<h3 id="databrary-credentials">Databrary credentials<a class="anchor" aria-label="anchor" href="#databrary-credentials"></a>
</h3>
<p>Databrary (<a href="https://databrary.org" class="external-link">databrary.org</a>) is a data library specialized for storing and sharing video. Access to restricted data requires <a href="https://databrary.org/register" class="external-link">registration</a> and formal approval by an institution. The registration process involves the creation of an (email-account-based) user account and secure password. Once institutional authorization has been granted, a user may gain access to shared video, audio, and other data. Many commands in the <code>databraryapi</code> package return meaningful results <em>without</em> or <em>prior to</em> formal authorization.</p>
</div>
<div class="section level3">
<h3 id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h3>
<p>Once the <code>databraryapi</code> package has been installed, it may be loaded into the local environment via <code><a href="http://github.com/PLAY-behaviorome/databraryapi" class="external-link">library(databraryapi)</a></code>. It is advisable to configure the local environment each time the user wishes to access the system:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">login_db</span>()  <span class="co"># Queries stored log on credentials or creates and stores new credentials.</span></span></code></pre></div>
<p>The <code><a href="reference/login_db.html">login_db()</a></code> command uses the <code>keyring</code> package to create secure user name and password files using native system utilities for this purpose on Mac OS, Windows, and Linux. This is the recommended approach. The first time you log on to Databrary via the <code>databraryapi</code> package, you will need to run <code>config_passd()</code>. You should only need to run this once.</p>
<p>Once you are an authorized user on Databrary, you may also use</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">login_db</span>(<span class="st">"myemail@myemailhost.com"</span>)</span></code></pre></div>
<p>to log on.</p>
<p>Users on Mac OS and Linux systems may alternatively choose to store user account and password information in <code>~/api-keys/json/databrary-keys.json</code>. This file has the following format:</p>
<p><code>{json} {   "email":["myaccount@mymail.com"],   "pw":["s0mEth!nGl0nGandS3CURE"] }</code> This approach has risks as the credentials are stored as text. Users who choose this approach should use <code>login_db(stored.credentials = TRUE)</code>.</p>
<p>If users choose to log in with their user names and passwords on each access – <code>stored.credentials = FALSE</code> — and there is no stored credentials file accessible by <code>keyring</code> – <code>rstudioapi</code> package commands will query the user for both the user account and password. The <code>rstudioapi</code> commands work only under <a href="http://www.rstudio.com" class="external-link">RStudio</a>.</p>
<p>Whatever access model is chosen, the use of a password generator/manager program (e.g., <a href="http://www.lastpass.com" class="external-link">LastPass</a>, <a href="http://1password.com" class="external-link">1Password</a>, <a href="http://www.dashlane.com" class="external-link">Dashlane</a>) is strongly recommended.</p>
</div>
<div class="section level3">
<h3 id="command-descriptions">Command descriptions<a class="anchor" aria-label="anchor" href="#command-descriptions"></a>
</h3>
<p><code><a href="reference/get_db_stats.html">get_db_stats()</a></code> by default provides some data about the current number of authorized investigators, affiliates, institutions, datasets, files, and hours of stored video. Try</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">get_db_stats</span>(<span class="st">"people"</span>)</span></code></pre></div>
<p>to see a table of newly authorized researchers. Or, try</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">get_db_stats</span>(<span class="st">'datasets'</span>)</span></code></pre></div>
<p>to see a list of the latest shared datasets.</p>
<p><code><a href="reference/read_csv_data_as_df.html">read_csv_data_as_df()</a></code> by default reads a publicly shared CSV data file from Databrary’s volume 1 <a href="http://databrary.org/volume/1" class="external-link uri">http://databrary.org/volume/1</a>. Try</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">with</span>(<span class="fu">read_csv_data_as_df</span>(), <span class="fu">plot</span>(Auth_Investigators, Institutions))</span></code></pre></div>
<p>to view a simple plot of the number of authorized investigators and institutions across time.</p>
<p><code><a href="reference/download_video.html">download_video()</a></code> by default reads a short publicly shared testing video depicting a series of numbers counting up from 000. Unless you specify another file name, the .mp4 format movie will download to the current directory as <code>test.mp4</code>.</p>
<p><code><a href="reference/get_file_duration.html">get_file_duration()</a></code> by default returns the duration (in ms) of the same publicly shared video in volume 1.</p>
<p><code><a href="reference/download_datavyu.html">download_datavyu()</a></code> by default downloads the Datavyu spreadsheet linked to the test video in volume 1 into a default <code>tmp/</code> directory.</p>
<p><code><a href="reference/download_session_csv.html">download_session_csv()</a></code> by default reads a CSV of the “sessions” spreadsheet from Databrary’s volume 1 <a href="http://databrary.org/volume/1" class="external-link uri">http://databrary.org/volume/1</a> and returns it as a data frame.</p>
<p><code><a href="reference/extract_dv.html">extract_dv()</a></code> then extracts the text files embedded in the Datavyu (.opf) file.</p>
<p><code><a href="reference/dv_to_csv.html">dv_to_csv()</a></code> converts the extracted Datavyu file to a CSV that can be loaded as a data frame using other commands.</p>
<p><code><a href="reference/list_assets_by_type.html">list_assets_by_type()</a></code> by defaults lists the videos in Databrary volume 1 <a href="http://databrary.org/volume/1" class="external-link uri">http://databrary.org/volume/1</a>.</p>
<p><code><a href="reference/list_assets_in_session.html">list_assets_in_session()</a></code> by default lists <em>all</em> files in the ‘Top-level Materials’ folder (session/slot 9807) in volume 1 <a href="https://nyu.databrary.org/volume/1/slot/9807/-" class="external-link uri">https://nyu.databrary.org/volume/1/slot/9807/-</a></p>
<p><code><a href="reference/list_specified_assets_in_session.html">list_specified_assets_in_session()</a></code> by default lists the <em>videos</em> in volume 1, session/slot 9807.</p>
<p><code><a href="reference/list_people.html">list_people()</a></code> by default lists information about the two Databrary PIs, Karen Adolph and Rick Gilmore, and the Co-I, David Millman.</p>
<p><code><a href="reference/list_volume_owners.html">list_volume_owners()</a></code> by default lists the volume owners for Databrary volume 1 <a href="http://databrary.org/volume/1" class="external-link uri">http://databrary.org/volume/1</a>.</p>
<p><code><a href="reference/logout_db.html">logout_db()</a></code> logs out of Databrary and does some simple clean up.</p>
<p><code><a href="reference/get_supported_file_types.html">get_supported_file_types()</a></code> returns a data frame with the file types Databrary currently supports.</p>
<p><code><a href="reference/download_volume_zip.html">download_volume_zip()</a></code> downloads a zip archive of the materials in volume 31.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="http://github.com/databrary/databrary-r/" class="external-link">Browse source code</a></li>
<li><a href="http://github.com/databrary/databrary-r/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing databrary.r</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Rick O. Gilmore <br><small class="roles"> Author, maintainer </small>  </li>
<li>Jeffrey Spies <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Rick O. Gilmore, Jeffrey Spies.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
