<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing Databrary.org via the API • databrary.r</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Accessing Databrary.org via the API">
<meta property="og:description" content="databrary.r">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">databrary.r</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/databrary-vignette.html">Accessing Databrary.org via the API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/PLAY-behaviorome/databraryapi/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Accessing Databrary.org via the API</h1>
                        <h4 data-toc-skip class="author">Rick O.
Gilmore</h4>
            
            <h4 data-toc-skip class="date">2023-06-16</h4>
      
      <small class="dont-index">Source: <a href="http://github.com/PLAY-behaviorome/databraryapi/blob/HEAD/vignettes/databrary-vignette.Rmd" class="external-link"><code>vignettes/databrary-vignette.Rmd</code></a></small>
      <div class="hidden name"><code>databrary-vignette.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="vignette-info">Vignette Info<a class="anchor" aria-label="anchor" href="#vignette-info"></a>
</h2>
<p>Databrary is a powerful tool for storing and sharing video data and
documentation with other researchers. With the <code>databraryapi</code>
package, it becomes even more powerful. Rather than interact with
Databrary through a web browser, users can write their own code to
download participant data or even specific files.</p>
<p>I wrote the Databrary API so I could find out what’s going on on the
site, and eventually so I can streamline my own analysis and data
sharing workflows. Let’s get started.</p>
</div>
<div class="section level2">
<h2 id="registering">Registering<a class="anchor" aria-label="anchor" href="#registering"></a>
</h2>
<p>Access to Databrary requires prior <a href="https://databrary.org/register" class="external-link">registration</a> and <a href="https://www.databrary.org/resources/agreement.html" class="external-link">authorization</a>
from an institution. The authorization process requires formal agreement
by an institution. But you’ll create an account ID (email) and secure
password when you register. Then, when you log in with your new
credentials, you’ll select an existing institution (if yours is on the
list), a new institution (if yours isn’t), or an existing authorized
investigator (if you are a student, postdoc, or collaborator) to request
authorization from.</p>
</div>
<div class="section level2">
<h2 id="first-steps-while-you-await-authorization">First steps (while you await authorization)<a class="anchor" aria-label="anchor" href="#first-steps-while-you-await-authorization"></a>
</h2>
<p>But even before formal authorization is complete, a user can access
the public materials on Databrary. For this vignette, we’ll assume you
fall into this category.</p>
<p>First, we need to download and install the <code>devtools</code>
package and then the <code>databraryapi</code> package from GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="http://github.com/PLAY-behaviorome/databraryapi" class="external-link">databraryapi</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"databrary/databrary-r"</span><span class="op">)</span> </span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Loading required package: databraryapi</span></span>
<span><span class="co">#&gt; Welcome to the databraryapi package</span></span></code></pre></div>
<p>Next, let’s load the package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://github.com/PLAY-behaviorome/databraryapi" class="external-link">databraryapi</a></span><span class="op">)</span></span></code></pre></div>
<p>Then, try this command to pull data about Databrary’s founders:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_people.html">list_people</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 6</span></span></span>
<span><span class="co">#&gt;      id sortname prename affiliation                       url             orcid</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     5 Adolph   Karen   New York University               http://www.psy… <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     6 Gilmore  Rick O. The Pennsylvania State University http://gilmore… 0000…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     7 Millman  David   New York University               <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>Databrary assigns a unique number for each person and institution on
the system called a ‘party id’. When we run
<code>list_people(1:50)</code> we are asking the system to provide us
information about all of the <em>people</em> whose party id’s are
between 1 and 50. Let’s try it:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_people.html">list_people</a></span><span class="op">(</span>people_list <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 16 × 6</span></span></span>
<span><span class="co">#&gt;       id sortname        prename       orcid               affiliation     url  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 Simon           Dylan         0000-0002-2793-1679 <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     3 Steiger         Lisa          <span style="color: #BB0000;">NA</span>                  Databrary       <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     4 Byrne           Andrea        <span style="color: #BB0000;">NA</span>                  Databrary       <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     5 Adolph          Karen         <span style="color: #BB0000;">NA</span>                  New York Unive… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     6 Gilmore         Rick O.       0000-0002-7676-3982 The Pennsylvan… http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     7 Millman         David         <span style="color: #BB0000;">NA</span>                  New York Unive… <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    11 Tamis-LeMonda   Catherine     <span style="color: #BB0000;">NA</span>                  New York Unive… <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    13 Roy             Lina Wictoren <span style="color: #BB0000;">NA</span>                  NYU             <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    14 Franchak        John          <span style="color: #BB0000;">NA</span>                  University of … http…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    16 Professor       Suzanne Q.    <span style="color: #BB0000;">NA</span>                  Databrary       <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>    17 Jimenez-Robbins Carmen        <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>    18 Coe             Jon           <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>    19 Foo             Vicky         <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>    20 Gordon          Peter         <span style="color: #BB0000;">NA</span>                  Teachers Colle… <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>    24 Chan            Gladys        <span style="color: #BB0000;">NA</span>                  NYU             <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span>    32 Karasik         Lana          <span style="color: #BB0000;">NA</span>                  CUNY            <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>It’s a bit slow, but you should see information about people
beginning with Dylan Simon and ending with Lana Karasik.</p>
<p>You can also try seeing what’s new on Databrary. The
<code><a href="../reference/get_db_stats.html">get_db_stats()</a></code> command gives you information about the
newly authorized people, institutions, and newly uploaded datasets. Try
this:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_db_stats.html">get_db_stats</a></span><span class="op">(</span><span class="st">"stats"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  date investigators affiliates institutions datasets_total</span></span>
<span><span class="co">#&gt; 1 2023-06-16 15:33:22          1678        621          748           1567</span></span>
<span><span class="co">#&gt;   datasets_shared n_files    hours      TB</span></span>
<span><span class="co">#&gt; 1             918  224913 109591.8 47.8304</span></span>
<span><span class="fu"><a href="../reference/get_db_stats.html">get_db_stats</a></span><span class="op">(</span><span class="st">"people"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 6</span></span></span>
<span><span class="co">#&gt;      id sortname prename  affiliation                      url   institution</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">4</span>649 Booker   Jordan   University of Missouri, Columbia <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> <span style="text-decoration: underline;">11</span>280 Rose     Amanda   Universiry of Missouri           <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> <span style="text-decoration: underline;">11</span>348 Greene   Michelle Bates College                    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="fu"><a href="../reference/get_db_stats.html">get_db_stats</a></span><span class="op">(</span><span class="st">"institutions"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 6</span></span></span>
<span><span class="co">#&gt;      id sortname      prename affiliation url                    institution</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="text-decoration: underline;">11</span>395 Bates College <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>          https://www.bates.edu/ TRUE</span></span>
<span><span class="fu"><a href="../reference/get_db_stats.html">get_db_stats</a></span><span class="op">(</span><span class="st">"datasets"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 7</span></span></span>
<span><span class="co">#&gt;      id name                    body  creation owners permission publicsharefull</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">1</span>612 Visual Experience Data… <span style="color: #949494;">"</span>The… 2023-06… <span style="color: #949494;">&lt;df&gt;</span>            1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">1</span>610 DBN - California - Wav… <span style="color: #949494;">"</span>Thi… 2023-06… <span style="color: #949494;">&lt;df&gt;</span>            1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">1</span>608 What's counting 3.0 cs… <span style="color: #949494;">"</span>6 t… 2023-06… <span style="color: #949494;">&lt;df&gt;</span>            1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">1</span>607 DBN - Shanghai - Wave … <span style="color: #949494;">"</span>Thi… 2023-05… <span style="color: #949494;">&lt;df&gt;</span>            1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">1</span>606 Pareidolia on Lookit    <span style="color: #949494;">"</span>All… 2023-05… <span style="color: #949494;">&lt;df&gt;</span>            1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">1</span>605 DBN - Massachussetts -… <span style="color: #949494;">"</span>Thi… 2023-05… <span style="color: #949494;">&lt;df&gt;</span>            1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>  <span style="text-decoration: underline;">1</span>604 DBN - Massachussetts -… <span style="color: #949494;">"</span>Thi… 2023-05… <span style="color: #949494;">&lt;df&gt;</span>            1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>  <span style="text-decoration: underline;">1</span>603 Lying About Santa Claus <span style="color: #949494;">"</span>2 s… 2023-05… <span style="color: #949494;">&lt;df&gt;</span>            1 FALSE</span></span></code></pre></div>
<p>Depending on when you run this command, there may or may not be new
items.</p>
</div>
<div class="section level2">
<h2 id="once-you-are-authorized">Once you are authorized<a class="anchor" aria-label="anchor" href="#once-you-are-authorized"></a>
</h2>
<p>Congratulations! Your institution has approved your access to
Databrary’s identifiable data. Now, it’s time to set-up
<code>databraryapi</code> so you can access these materials.</p>
<p>By default, <code>databraryapi</code> stores your Databrary user
account (email) and password in a secure, encrypted file that your
computer’s operating system uses for storing other passwords. The
<code>keyring</code> package provides this functionality. There are
alternative ways of storing user credentials, but this is the
recommended one.</p>
<p>Once you are authorized, you will gain access to a much wider range
of materials on Databrary. When that happens, you’ll load the package
with <code><a href="http://github.com/PLAY-behaviorome/databraryapi" class="external-link">library(databraryapi)</a></code> and then</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/login_db.html">login_db</a></span><span class="op">(</span>email <span class="op">=</span> <span class="st">"youremail@yourinstitution.edu"</span><span class="op">)</span></span></code></pre></div>
<p>If everything works out, you should see a
<code>Login successful</code> message at the R console. Congratulations,
you are ready to access Databrary’s restricted shared information along
with any private, unshared information you have access to.</p>
</div>
<div class="section level2">
<h2 id="interacting-with-stored-data-files">Interacting with stored data files<a class="anchor" aria-label="anchor" href="#interacting-with-stored-data-files"></a>
</h2>
<p>The purpose of a data repository is to enable researchers to store
and share data. Databrary aims to go a step further by allowing
researchers to interact with – to visualize and analyze – the data they
or others have stored on the system. The <code>databraryapi</code>
package includes several commands to make this easy to do.</p>
<p>Let’s begin by listing all of the sessions (dates and times when data
was collected) in volume 1. Most of the <code>databraryapi</code>
commands have default values so you can explore how the functions work.
In this case, the <code><a href="../reference/list_sessions.html">list_sessions()</a></code> command has a default
value of <code>vol_id = 1</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_sessions.html">list_sessions</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    session_id  top                                                      name</span></span>
<span><span class="co">#&gt; 2        6256   NA                                    Advisory Board Meeting</span></span>
<span><span class="co">#&gt; 3        6257   NA                                    Advisory Board Meeting</span></span>
<span><span class="co">#&gt; 4        6540   NA                                    Advisory Board Meeting</span></span>
<span><span class="co">#&gt; 5        7821   NA                               SRCD Preconference Workshop</span></span>
<span><span class="co">#&gt; 6        8460   NA                                    Advisory Board Meeting</span></span>
<span><span class="co">#&gt; 7        9224   NA                    Regional Workshop at NYU (Slides only)</span></span>
<span><span class="co">#&gt; 8        9578   NA                                CDS Preconference Workshop</span></span>
<span><span class="co">#&gt; 9        9807 TRUE                                       Top-level materials</span></span>
<span><span class="co">#&gt; 10      10068   NA                         Regional Workshop in Philadelphia</span></span>
<span><span class="co">#&gt; 11      10991   NA                           Regional Workshop at Penn State</span></span>
<span><span class="co">#&gt; 12      11362   NA Regional Workshop at University of Maryland, College Park</span></span>
<span><span class="co">#&gt; 13      11660   NA                             ICIS16 Preconference Workshop</span></span>
<span><span class="co">#&gt; 14      11886   NA                                    Advisory Board Meeting</span></span>
<span><span class="co">#&gt; 15      14297   NA              Regional Workshop at University of Minnesota</span></span>
<span><span class="co">#&gt; 16      14550   NA                              Regional Workshop at Harvard</span></span>
<span><span class="co">#&gt; 17      14551   NA                               Regional Workshop in Boston</span></span>
<span><span class="co">#&gt; 18      15663   NA                                    Bethesda PLAY Workshop</span></span>
<span><span class="co">#&gt; 19      16104   NA                   Regional Workshop at University of Iowa</span></span>
<span><span class="co">#&gt; 20      16891   NA                                    Pre-Conference at SRCD</span></span>
<span><span class="co">#&gt; 21      16894   NA Pre-Conference at SRCD "The Science of Play and Learning"</span></span>
<span><span class="co">#&gt; 22      17187   NA                                     AERA 2017 San Antonio</span></span>
<span><span class="co">#&gt; 23      17417   NA      Regional Workshop at Emory University in Atlanta, GA</span></span>
<span><span class="co">#&gt; 24      17886   NA                               Advisory Board Meeting 2017</span></span>
<span><span class="co">#&gt; 25      21077   NA                                         CDS 2017 Portland</span></span>
<span><span class="co">#&gt; 26      25952   NA                               Advisory Board Meeting 2018</span></span>
<span><span class="co">#&gt;          date release vol_id</span></span>
<span><span class="co">#&gt; 2  2013-10-28       3      1</span></span>
<span><span class="co">#&gt; 3  2014-04-07       3      1</span></span>
<span><span class="co">#&gt; 4  2014-10-17       3      1</span></span>
<span><span class="co">#&gt; 5  2015-03-18       3      1</span></span>
<span><span class="co">#&gt; 6  2015-05-11       3      1</span></span>
<span><span class="co">#&gt; 7  2015-09-18       3      1</span></span>
<span><span class="co">#&gt; 8  2015-10-08       3      1</span></span>
<span><span class="co">#&gt; 9        &lt;NA&gt;      NA      1</span></span>
<span><span class="co">#&gt; 10 2015-11-20       3      1</span></span>
<span><span class="co">#&gt; 11 2016-03-25       3      1</span></span>
<span><span class="co">#&gt; 12 2016-04-15       3      1</span></span>
<span><span class="co">#&gt; 13 2016-05-25       3      1</span></span>
<span><span class="co">#&gt; 14 2016-06-13       3      1</span></span>
<span><span class="co">#&gt; 15 2016-10-14       3      1</span></span>
<span><span class="co">#&gt; 16 2016-10-21       3      1</span></span>
<span><span class="co">#&gt; 17 2016-10-21       3      1</span></span>
<span><span class="co">#&gt; 18 2016-12-16       3      1</span></span>
<span><span class="co">#&gt; 19 2017-02-03       3      1</span></span>
<span><span class="co">#&gt; 20 2017-04-05       3      1</span></span>
<span><span class="co">#&gt; 21 2017-04-05       3      1</span></span>
<span><span class="co">#&gt; 22 2017-04-30       3      1</span></span>
<span><span class="co">#&gt; 23 2017-05-15       3      1</span></span>
<span><span class="co">#&gt; 24 2017-06-09       3      1</span></span>
<span><span class="co">#&gt; 25 2017-10-13       3      1</span></span>
<span><span class="co">#&gt; 26 2018-03-26       3      1</span></span></code></pre></div>
<p>So, this volume contains a lot of sessions, 25 in fact.</p>
<p>Let’s peak inside one of them, the
<code>list_sessions()[22, 'name']</code> also referenced by session ID
17417. These session IDs are unique identifiers we’ll need for accessing
the files contained inside. So, let’s see what’s inside session
17417.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">this_session</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_sessions.html">list_sessions</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">22</span>,<span class="st">'session_id'</span><span class="op">]</span></span>
<span><span class="fu"><a href="../reference/list_assets_in_session.html">list_assets_in_session</a></span><span class="op">(</span>session_id <span class="op">=</span> <span class="va">this_session</span><span class="op">)</span></span>
<span><span class="co">#&gt;   asset_id asset_type_id duration          segment   name permission      size</span></span>
<span><span class="co">#&gt; 1    77809          -800  2853384       0, 2853384  00012          1 977096783</span></span>
<span><span class="co">#&gt; 2    77815          -800  2855220 2854383, 5709603  00013          1 943655212</span></span>
<span><span class="co">#&gt; 3    77811          -800   121547 5709594, 5831141  00014          1  39116816</span></span>
<span><span class="co">#&gt; 4    77813          -800   704538 5831098, 6535636 000151          1 243847194</span></span>
<span><span class="co">#&gt; 5    77817          -800  2037970 6535606, 8573576 000152          1 695084769</span></span>
<span><span class="co">#&gt; 6    77819          -800   743179 8573092, 9316271  00016          1 252821639</span></span>
<span><span class="co">#&gt;   session_id  mimetype extension   asset_type transcodable</span></span>
<span><span class="co">#&gt; 1      17417 video/mp4       mp4 MPEG-4 video         -800</span></span>
<span><span class="co">#&gt; 2      17417 video/mp4       mp4 MPEG-4 video         -800</span></span>
<span><span class="co">#&gt; 3      17417 video/mp4       mp4 MPEG-4 video         -800</span></span>
<span><span class="co">#&gt; 4      17417 video/mp4       mp4 MPEG-4 video         -800</span></span>
<span><span class="co">#&gt; 5      17417 video/mp4       mp4 MPEG-4 video         -800</span></span>
<span><span class="co">#&gt; 6      17417 video/mp4       mp4 MPEG-4 video         -800</span></span></code></pre></div>
<p>Notice that I took row 22 and the value of the
<code>session_id</code> column to specify the <code>session_id</code>
value for the <code><a href="../reference/list_assets_in_session.html">list_assets_in_session()</a></code> function. I did the
same for the <code>vol_id</code>. I took these values from the output of
<code><a href="../reference/list_sessions.html">list_sessions()</a></code>. The <code>asset_id</code> column in this
table is the <em>asset</em> or file level ID.</p>
<p>Clearly, there are several files here, 6 in fact. And all are videos.
How do I know that? Well, the <code>format</code> column has all ‘-800’
values in it. That doesn’t help; you say. Oh, right, here’s how to link
Databrary’s file or ‘asset’ types to their format identifiers:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_supported_file_types.html">get_supported_file_types</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    asset_type_id</span></span>
<span><span class="co">#&gt; 1           -800</span></span>
<span><span class="co">#&gt; 2           -700</span></span>
<span><span class="co">#&gt; 3           -600</span></span>
<span><span class="co">#&gt; 4              1</span></span>
<span><span class="co">#&gt; 5              2</span></span>
<span><span class="co">#&gt; 6              4</span></span>
<span><span class="co">#&gt; 7              5</span></span>
<span><span class="co">#&gt; 8              6</span></span>
<span><span class="co">#&gt; 9              7</span></span>
<span><span class="co">#&gt; 10             8</span></span>
<span><span class="co">#&gt; 11             9</span></span>
<span><span class="co">#&gt; 12            10</span></span>
<span><span class="co">#&gt; 13            11</span></span>
<span><span class="co">#&gt; 14            12</span></span>
<span><span class="co">#&gt; 15            13</span></span>
<span><span class="co">#&gt; 16            14</span></span>
<span><span class="co">#&gt; 17            15</span></span>
<span><span class="co">#&gt; 18            16</span></span>
<span><span class="co">#&gt; 19            18</span></span>
<span><span class="co">#&gt; 20            19</span></span>
<span><span class="co">#&gt; 21            20</span></span>
<span><span class="co">#&gt; 22            21</span></span>
<span><span class="co">#&gt; 23            22</span></span>
<span><span class="co">#&gt; 24            23</span></span>
<span><span class="co">#&gt; 25            24</span></span>
<span><span class="co">#&gt; 26            25</span></span>
<span><span class="co">#&gt; 27            26</span></span>
<span><span class="co">#&gt; 28            27</span></span>
<span><span class="co">#&gt; 29            28</span></span>
<span><span class="co">#&gt; 30            29</span></span>
<span><span class="co">#&gt; 31            30</span></span>
<span><span class="co">#&gt; 32            31</span></span>
<span><span class="co">#&gt;                                                                     mimetype</span></span>
<span><span class="co">#&gt; 1                                                                  video/mp4</span></span>
<span><span class="co">#&gt; 2                                                                 image/jpeg</span></span>
<span><span class="co">#&gt; 3                                                                 audio/mpeg</span></span>
<span><span class="co">#&gt; 4                                                                 text/plain</span></span>
<span><span class="co">#&gt; 5                                                                   text/csv</span></span>
<span><span class="co">#&gt; 6                                                                   text/rtf</span></span>
<span><span class="co">#&gt; 7                                                                  image/png</span></span>
<span><span class="co">#&gt; 8                                                            application/pdf</span></span>
<span><span class="co">#&gt; 9                                                         application/msword</span></span>
<span><span class="co">#&gt; 10                                   application/vnd.oasis.opendocument.text</span></span>
<span><span class="co">#&gt; 11   application/vnd.openxmlformats-officedocument.wordprocessingml.document</span></span>
<span><span class="co">#&gt; 12                                                  application/vnd.ms-excel</span></span>
<span><span class="co">#&gt; 13                            application/vnd.oasis.opendocument.spreadsheet</span></span>
<span><span class="co">#&gt; 14         application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</span></span>
<span><span class="co">#&gt; 15                                             application/vnd.ms-powerpoint</span></span>
<span><span class="co">#&gt; 16                           application/vnd.oasis.opendocument.presentation</span></span>
<span><span class="co">#&gt; 17 application/vnd.openxmlformats-officedocument.presentationml.presentation</span></span>
<span><span class="co">#&gt; 18                                                   application/vnd.datavyu</span></span>
<span><span class="co">#&gt; 19                                                                video/webm</span></span>
<span><span class="co">#&gt; 20                                                                video/mpeg</span></span>
<span><span class="co">#&gt; 21                                                           video/quicktime</span></span>
<span><span class="co">#&gt; 22                                                                video/mp2t</span></span>
<span><span class="co">#&gt; 23                                                                 video/avi</span></span>
<span><span class="co">#&gt; 24                                                    application/x-spss-sav</span></span>
<span><span class="co">#&gt; 25                                                                 audio/wav</span></span>
<span><span class="co">#&gt; 26                                                            video/x-ms-wmv</span></span>
<span><span class="co">#&gt; 27                                                               text/x-chat</span></span>
<span><span class="co">#&gt; 28                                                                 audio/aac</span></span>
<span><span class="co">#&gt; 29                                                            audio/x-ms-wma</span></span>
<span><span class="co">#&gt; 30                            application/vnd.lena.interpreted-time-segments</span></span>
<span><span class="co">#&gt; 31                                                                video/x-dv</span></span>
<span><span class="co">#&gt; 32                                                                 text/elan</span></span>
<span><span class="co">#&gt;    extension                                          asset_type transcodable</span></span>
<span><span class="co">#&gt; 1        mp4                                        MPEG-4 video         -800</span></span>
<span><span class="co">#&gt; 2        jpg                                          JPEG image           NA</span></span>
<span><span class="co">#&gt; 3        mp3                    MPEG-1 or MPEG-2 audio layer III         -600</span></span>
<span><span class="co">#&gt; 4        txt                                          Plain text           NA</span></span>
<span><span class="co">#&gt; 5        csv                              Comma-separated values           NA</span></span>
<span><span class="co">#&gt; 6        rtf                                    Rich text format           NA</span></span>
<span><span class="co">#&gt; 7        png                           Portable network graphics           NA</span></span>
<span><span class="co">#&gt; 8        pdf                                   Portable document           NA</span></span>
<span><span class="co">#&gt; 9        doc                             Microsoft Word document           NA</span></span>
<span><span class="co">#&gt; 10       odf                                   OpenDocument text           NA</span></span>
<span><span class="co">#&gt; 11      docx           Microsoft Word (Office Open XML) document           NA</span></span>
<span><span class="co">#&gt; 12       xls                         Microsoft Excel spreadsheet           NA</span></span>
<span><span class="co">#&gt; 13       ods                            OpenDocument spreadsheet           NA</span></span>
<span><span class="co">#&gt; 14      xlsx          Microsoft Excel (Office Open XML) workbook           NA</span></span>
<span><span class="co">#&gt; 15       ppt                   Microsoft PowerPoint presentation           NA</span></span>
<span><span class="co">#&gt; 16       odp                           OpenDocument presentation           NA</span></span>
<span><span class="co">#&gt; 17      pptx Microsoft PowerPoint (Office Open XML) presentation           NA</span></span>
<span><span class="co">#&gt; 18       opf                                             Datavyu           NA</span></span>
<span><span class="co">#&gt; 19      webm                                          WebM video         -800</span></span>
<span><span class="co">#&gt; 20       mpg           MPEG program stream (MPEG-1/MPEG-2 video)         -800</span></span>
<span><span class="co">#&gt; 21       mov                                     QuickTime video         -800</span></span>
<span><span class="co">#&gt; 22       mts                               MPEG transport stream         -800</span></span>
<span><span class="co">#&gt; 23       avi                              Audio Video Interleave         -800</span></span>
<span><span class="co">#&gt; 24       sav                                    SPSS System File           NA</span></span>
<span><span class="co">#&gt; 25       wav                                      Waveform audio         -600</span></span>
<span><span class="co">#&gt; 26       wmv                                 Windows Media video         -800</span></span>
<span><span class="co">#&gt; 27       cha         Codes for the Human Analysis of Transcripts           NA</span></span>
<span><span class="co">#&gt; 28       aac                               Advanced Audio Coding         -600</span></span>
<span><span class="co">#&gt; 29       wma                                 Windows Media audio         -600</span></span>
<span><span class="co">#&gt; 30       its                      LENA Interpreted Time Segments           NA</span></span>
<span><span class="co">#&gt; 31        dv                      Digital Interface Format video         -800</span></span>
<span><span class="co">#&gt; 32       eaf                         ELAN - Linguistic Annotator           NA</span></span></code></pre></div>
<p>See now that ‘-800’ has <code>mimetype</code> of
<code>video/mp4</code>? This list shows us all of the currently
supported file types. Knowing them, we can make more meaningful searches
for materials we want.</p>
<p>Let’s find all of the ‘pdf’ documents in volume 1:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/list_assets_by_type.html">list_assets_by_type</a></span><span class="op">(</span>vol_id <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"pdf"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   asset_id asset_type_id                                   name permission</span></span>
<span><span class="co">#&gt; 1    22412             6                                 Slides          1</span></span>
<span><span class="co">#&gt; 2     9839             6                           04-07-Slides          1</span></span>
<span><span class="co">#&gt; 3    12039             6                                 slides          1</span></span>
<span><span class="co">#&gt; 4    22408             6                         Welcome slides          1</span></span>
<span><span class="co">#&gt; 5    22407             6 SLIDES: Best practices in video coding          1</span></span>
<span><span class="co">#&gt; 6    22410             6               SLIDES: Lunch discussion          1</span></span>
<span><span class="co">#&gt;       size duration segment session_id        mimetype extension</span></span>
<span><span class="co">#&gt; 1  4573426       NA    NULL       6256 application/pdf       pdf</span></span>
<span><span class="co">#&gt; 2  3013342       NA    NULL       6257 application/pdf       pdf</span></span>
<span><span class="co">#&gt; 3 10192940       NA    NULL       6540 application/pdf       pdf</span></span>
<span><span class="co">#&gt; 4   304566       NA       0       7821 application/pdf       pdf</span></span>
<span><span class="co">#&gt; 5  2924252       NA  528181       7821 application/pdf       pdf</span></span>
<span><span class="co">#&gt; 6  6899381       NA 5112000       7821 application/pdf       pdf</span></span>
<span><span class="co">#&gt;          asset_type transcodable classification</span></span>
<span><span class="co">#&gt; 1 Portable document           NA             NA</span></span>
<span><span class="co">#&gt; 2 Portable document           NA              3</span></span>
<span><span class="co">#&gt; 3 Portable document           NA              3</span></span>
<span><span class="co">#&gt; 4 Portable document           NA             NA</span></span>
<span><span class="co">#&gt; 5 Portable document           NA             NA</span></span>
<span><span class="co">#&gt; 6 Portable document           NA             NA</span></span></code></pre></div>
<p>I used the <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> command to show you only the top of
the list because I knew there are a large number of PDF files here.</p>
<div class="section level3">
<h3 id="finding-volumes-with-videos">Finding volumes with videos<a class="anchor" aria-label="anchor" href="#finding-volumes-with-videos"></a>
</h3>
<p>Databrary is a video data library, so you may naturally be interested
in what volumes have videos. The <code><a href="../reference/get_video_stats.html">get_video_stats()</a></code> command
comes in handy here. Let’s see about the video content available in
volume 1.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_video_stats.html">get_video_stats</a></span><span class="op">(</span>vol_id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt;   vol_id n_videos n_sessions  tot_hrs</span></span>
<span><span class="co">#&gt; 1      1       75         21 70.14679</span></span></code></pre></div>
<p>So, there’s quite a lot to view there. But what about some other
volumes? This code uses the <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> command from base R to
run the <code><a href="../reference/get_video_stats.html">get_video_stats()</a></code> command across a list of volumes,
specifically volumes 1 to 5. It also uses the <code>rbind.fill()</code>
command from the <code>plyr</code> package to merge the list of data
frames into a single one that is easy to read. <strong>Note:</strong>
The following takes a few moments to run, so please be patient while it
does.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/rbind.fill.html" class="external-link">rbind.fill</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="va">get_video_stats</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: One or more parsing issues, call `problems()` on your data frame for details,</span></span>
<span><span class="co">#&gt; e.g.:</span></span>
<span><span class="co">#&gt;   dat &lt;- vroom(...)</span></span>
<span><span class="co">#&gt;   problems(dat)</span></span>
<span><span class="co">#&gt; One or more parsing issues, call `problems()` on your data frame for details,</span></span>
<span><span class="co">#&gt; e.g.:</span></span>
<span><span class="co">#&gt;   dat &lt;- vroom(...)</span></span>
<span><span class="co">#&gt;   problems(dat)</span></span>
<span><span class="co">#&gt; One or more parsing issues, call `problems()` on your data frame for details,</span></span>
<span><span class="co">#&gt; e.g.:</span></span>
<span><span class="co">#&gt;   dat &lt;- vroom(...)</span></span>
<span><span class="co">#&gt;   problems(dat)</span></span>
<span><span class="co">#&gt;   vol_id n_videos n_sessions    tot_hrs</span></span>
<span><span class="co">#&gt; 1      1       75         21  70.146791</span></span>
<span><span class="co">#&gt; 2      2       14          3   1.327995</span></span>
<span><span class="co">#&gt; 3      4       73         56  10.748913</span></span>
<span><span class="co">#&gt; 4      5      138        132 108.296428</span></span></code></pre></div>
<p>So, there’s a lot of video to view and reuse.</p>
</div>
<div class="section level3">
<h3 id="interacting-with-stored-data-files-1">Interacting with stored data files<a class="anchor" aria-label="anchor" href="#interacting-with-stored-data-files-1"></a>
</h3>
<p>It’s possible to download CSV format data files stored on Databrary
and manipulate or visualize the data directly in R. Here’s how.</p>
<p>Notice that the list of sessions had one session named ‘Top-level
materials’. We can find it again easily using some commands from the
<code>dplyr</code> package.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_sessions.html">list_sessions</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">name</span> <span class="op">==</span> <span class="st">'Top-level materials'</span><span class="op">)</span></span>
<span><span class="va">m</span></span>
<span><span class="co">#&gt;   session_id  top                name date release vol_id</span></span>
<span><span class="co">#&gt; 1       9807 TRUE Top-level materials &lt;NA&gt;      NA      1</span></span></code></pre></div>
<p>We can list the ‘assets’ or files in this session using the
<code><a href="../reference/list_assets_in_session.html">list_assets_in_session()</a></code> command. This command takes two
main arguments, the ‘volume_id’ and the ‘session_id’. We’ll take the
values of these parameters from the ‘m’ variable we just created.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_assets_in_session.html">list_assets_in_session</a></span><span class="op">(</span>session_id <span class="op">=</span> <span class="va">m</span><span class="op">$</span><span class="va">session_id</span><span class="op">)</span></span>
<span><span class="co">#&gt;   asset_id asset_type_id                                 name permission</span></span>
<span><span class="co">#&gt; 1   153109             2            volumes-citations-monthly          0</span></span>
<span><span class="co">#&gt; 2   153108             2 databrary-institutions-investigators          1</span></span>
<span><span class="co">#&gt; 3   117035            16         counting (demo Datavyu file)          1</span></span>
<span><span class="co">#&gt; 4      314             6               NIH Proposal Narrative          1</span></span>
<span><span class="co">#&gt; 5     9200             5                                 logo          1</span></span>
<span><span class="co">#&gt; 6        1          -800                counting (demo video)          1</span></span>
<span><span class="co">#&gt; 7      315             6               NSF Proposal Narrative          1</span></span>
<span><span class="co">#&gt;   classification    size duration session_id                mimetype extension</span></span>
<span><span class="co">#&gt; 1             NA      NA       NA       9807                text/csv       csv</span></span>
<span><span class="co">#&gt; 2              3    1826       NA       9807                text/csv       csv</span></span>
<span><span class="co">#&gt; 3              3    1030       NA       9807 application/vnd.datavyu       opf</span></span>
<span><span class="co">#&gt; 4              3 3826718       NA       9807         application/pdf       pdf</span></span>
<span><span class="co">#&gt; 5              3  104419       NA       9807               image/png       png</span></span>
<span><span class="co">#&gt; 6              3  394499    40000       9807               video/mp4       mp4</span></span>
<span><span class="co">#&gt; 7              3 4120930       NA       9807         application/pdf       pdf</span></span>
<span><span class="co">#&gt;                  asset_type transcodable</span></span>
<span><span class="co">#&gt; 1    Comma-separated values           NA</span></span>
<span><span class="co">#&gt; 2    Comma-separated values           NA</span></span>
<span><span class="co">#&gt; 3                   Datavyu           NA</span></span>
<span><span class="co">#&gt; 4         Portable document           NA</span></span>
<span><span class="co">#&gt; 5 Portable network graphics           NA</span></span>
<span><span class="co">#&gt; 6              MPEG-4 video         -800</span></span>
<span><span class="co">#&gt; 7         Portable document           NA</span></span></code></pre></div>
<p>If you scroll over, you’ll see that there are two files with the
<code>extension</code> variable of ‘csv’ and a <code>mimetype</code> of
‘text/csv’. These are data files we can now access and plot using the
corresponding <code>asset_id</code> values. We’ll use the
<code><a href="../reference/read_csv_data_as_df.html">read_csv_data_as_df()</a></code> command.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">databrary_growth</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_csv_data_as_df.html">read_csv_data_as_df</a></span><span class="op">(</span>session_id <span class="op">=</span> <span class="va">m</span><span class="op">$</span><span class="va">session_id</span>, asset_id <span class="op">=</span> <span class="fl">153108</span><span class="op">)</span></span></code></pre></div>
<p>We can examine the structure of the returned data frame using R’s
<code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code> command.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">databrary_growth</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    55 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;  $ Date              : chr  " 2014-04-01 00:00:00-04" " 2014-05-01 00:00:00-04" " 2014-07-01 00:00:00-04" " 2014-08-01 00:00:00-04" ...</span></span>
<span><span class="co">#&gt;  $ Institutions      : int  13 13 40 41 42 46 49 51 53 56 ...</span></span>
<span><span class="co">#&gt;  $ Auth_Investigators: int  7 9 38 48 62 85 90 96 102 115 ...</span></span></code></pre></div>
<p>Let’s plot these data.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">color_orange</span> <span class="op">&lt;-</span> <span class="st">"#EC7751"</span></span>
<span><span class="va">color_teal</span> <span class="op">&lt;-</span> <span class="st">"#4CAE99"</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">databrary_growth</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span><span class="va">.</span>, key <span class="op">=</span> <span class="st">'type'</span>, value <span class="op">=</span> <span class="st">'count'</span>, <span class="op">-</span><span class="va">Date</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="va">.</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Date</span>, y <span class="op">=</span> <span class="va">count</span>, color <span class="op">=</span> <span class="va">type</span>, group <span class="op">=</span> <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ylab</span><span class="op">(</span><span class="st">"Authorizations"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1100</span>, <span class="fl">100</span><span class="op">)</span>, expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.title.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.line <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.ticks.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1100</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `linewidth` instead.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">generated.</span></span></span></code></pre></div>
<p><img src="databrary-vignette_files/figure-html/plot-user-growth-1.png" width="700"></p>
<p>Note that this workflow allows you to import a data file directly
into your R session. You don’t have to download and save the file
locally. If you are working with sensitive or identifiable data, this
means an extra level of protection. Your workflows can be readily
reproducible by anyone who has access to the Databrary volume, session,
and file.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rick O. Gilmore.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
